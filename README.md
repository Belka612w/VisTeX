# VisTeX - Offline LaTeX Equation Generator

VisTeX は、Windows 環境で動作するオフラインの LaTeX 数式画像生成 Web アプリケーションです。
ローカルにインストールされた TeX Live 環境を利用して、高品質な数式画像（PNG/SVG）を生成・保存できます。
Web 技術（React + Node.js）を用いつつ、デスクトップアプリのように手軽に利用できるのが特徴です。

![VisTeX Screenshot](https://via.placeholder.com/800x450.png?text=VisTeX+Screenshot)
*(ここにスクリーンショットを貼ると分かりやすくなります)*

## ✨ 特徴

*   **完全オフライン動作**: 外部の Web API に依存せず、ローカルの TeX コマンド (`latex`, `dvipng`, `dvisvgm`) を直接呼び出してコンパイルします。セキュリティや通信環境を気にせず利用可能です。
*   **リアルタイムプレビュー**: 入力した LaTeX 数式を即座にコンパイルし、結果を表示します。エラー時はログから要点を抽出して通知します。
*   **柔軟な画像出力**:
    *   **PNG**: 背景透過対応、DPI（解像度）指定可能。PowerPoint や Word への貼り付けに最適です。
    *   **SVG**: ベクター形式での出力。Web サイトや印刷物向けに、劣化のない画像を作成できます。
*   **テンプレート管理**: よく使う数式を名前付きで保存し、ワンクリックで呼び出せます。
*   **フルモード搭載**: 通常は数式のみの入力で OK ですが、`\usepackage` を追加したい場合などに `\documentclass` から記述できる「フルモード」も備えています。
*   **モダンな UI**: ダークモードを基調とした Glassmorphism デザイン。レスポンシブ対応で、ウィンドウサイズに合わせてレイアウトが最適化されます。

## 📦 動作環境

以下のソフトウェアがインストールされている Windows 環境が必要です。

*   **OS**: Windows 10 / 11
*   **Node.js**: v16 以上推奨
*   **TeX Live** (または同等の TeX ディストリビューション)
    *   以下のコマンドがコマンドプロンプト/PowerShell から実行可能であること:
        *   `latex`
        *   `dvipng`
        *   `dvisvgm`

## 🚀 導入手順

1.  **リポジトリの取得**
    このリポジトリをクローンまたはダウンロードして展開します。

2.  **依存パッケージのインストール**
    プロジェクトのルートディレクトリ（`VisTeX` フォルダ）で以下のコマンドを実行します。
    これにより、バックエンドとフロントエンド両方の依存パッケージが一括でインストールされます。

    ```powershell
    npm install
    npm run install:all
    ```

## 🖥️ 起動方法

### ワンクリック起動（推奨）
フォルダ内の **`start_vistex.bat`** をダブルクリックしてください。
サーバーとクライアントが同時に立ち上がり、自動的にブラウザが開きます。

### コマンドラインからの起動
```powershell
npm run dev
```

## 📖 使い方

### 1. 数式の入力
画面左側のテキストエリアに LaTeX 形式で数式を入力します。
*   **通常モード**: 数式本体（例: `E = mc^2`）のみを入力します。自動的に `math mode` でラップされます。
*   **フルモード**: 左上のチェックボックスを ON にすると、`\documentclass` から始まる完全な LaTeX ソースを記述できます。独自のパッケージを使いたい場合に有効です。

### 2. プレビューとエラー確認
入力後、自動的にコンパイルが実行され、右側にプレビューが表示されます。
構文エラーがある場合は、プレビューエリア上部にエラーメッセージが表示されます。

### 3. 出力設定
右側のコントロールパネルで以下の設定が可能です。
*   **形式**: PNG または SVG を選択。
*   **文字色**: カラーピッカーまたは HEX コードで指定。
*   **背景**: 「透明」または「カスタム色」を選択。
*   **DPI**: PNG 選択時のみ、画像の解像度を指定可能（デフォルト: 300）。

### 4. 画像の保存
「画像を保存」ボタンをクリックすると、生成された画像ファイルがダウンロードされます。

### 5. テンプレート機能
*   **保存**: 「+ 現在の式を保存」ボタンで、現在入力中の数式をテンプレートとして登録できます。
*   **使用**: リストからテンプレート名をクリックすると、現在のカーソル位置に数式が挿入されます。
*   **削除**: リスト右側の「×」ボタンでテンプレートを削除します。

## 🛠️ 技術スタック

*   **Frontend**: React, TypeScript, Vite
*   **Backend**: Node.js, Express
*   **Styling**: Vanilla CSS (Glassmorphism Design)
*   **TeX Tools**: latex, dvipng, dvisvgm

## 📂 ディレクトリ構成

```text
VisTeX/
├── backend/            # Node.js サーバー (TeX 実行担当)
│   ├── server.js       # メインロジック
│   ├── templates.json  # テンプレートデータ
│   └── temp/           # 作業用一時ディレクトリ
├── frontend/           # React フロントエンド
│   ├── src/            # ソースコード
│   └── ...
├── package.json        # 統合管理用設定ファイル
└── start_vistex.bat    # 起動スクリプト
```
